<html>
<head>
<title>Api Call</title>
<script src="jquery-3.4.1.min.js"></script> 
<script type="text/javascript"> 
jQuery(document).ready(function(){ 
	
});

function callWebService(){
	var url = '';
	var arr ;
    var baseUrl = '';
	var client_id = '';  
	var client_secret = 'secret';  
	
      baseUrl   = 'http://localhost:5000';
	  client_id= '2224adb0-481f-4bdb-844a-cc8eacbd3199';//My home computer
	  
	  baseUrl   = 'https://192.168.41.93';
	  client_id= '864e4d8d-c3eb-4ac6-a225-e09862ca94c7';//test server
	
     var email= uuidv4()+'@ddssd33333d';
     var password='2131312312';
	
	  url = '/api/authenticate/register';
	  arr = { email : email , password : password };
	  
		json(arr,baseUrl+url);

	
	  arr = { "grant_type" : "password","username" : email,"password" : password,"client_id" : client_id,"client_secret" : client_secret,"scope" : "openid offline_access" },
	   url = '/api/authenticate/connect/token';
		
	    formurlencoded(arr,baseUrl+url);
}


function uuidv4() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
    return v.toString(16);
  });
}


function formurlencoded(arr,url){

	$.ajax({
			url:url ,
			type: 'POST',
			data: arr,
			contentType: "application/x-www-form-urlencoded",  
			dataType: 'json',
			async: false,
			success: function(msg) {
				alert(JSON.stringify(msg));
			},
			 error: function (xhr, ajaxOptions, thrownError) {
				alert(xhr.status);
				alert(thrownError);
			}
		});
}

function json(arr,url){

	$.ajax({
			url: url,
			type: 'POST',
			data: JSON.stringify(arr),
			contentType: 'application/json; charset=utf-8',
 			dataType: 'json',
			async: false,
			success: function(msg) {
				alert(JSON.stringify(msg));
			},
			 error: function (xhr, ajaxOptions, thrownError) {
				alert(xhr.status);
				alert(thrownError);
			}
		});
}


</script>
</head>
<body>

 <button onclick="callWebService()">Click me</button>

<form id="upload">
        <div>
            <label for="file"></label>
            <div>
                <input type="file" id="file" />
            </div>
        </div>
        <button type="submit">Upload</button>
    </form>
	
	
</body>
</html>